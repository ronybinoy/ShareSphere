{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Course Listings</title>
    <!-- Example for using Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

    <link href="{% static '/home.css' %}" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>

    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" />

    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/templatemo-edu-meeting.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/owl.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/lightbox.css' %}" />
    <!-- Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>

    <style>
        th {
            font-size: 15px;
            font-weight: 600;
        }

        td,
        button {
            font-size: 13px;
        }
        .btn-smaller {
            padding: 0.25rem 0.5rem;
            /* Adjust padding to make it smaller */
            font-size: 12px;
            /* Adjust font size to make it smaller */
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            display: block; 
            margin: 0 auto; 
            background-color: #4caf50;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s; 
        }
        
        button:hover {
            background-color: #45a049;
            transform: scale(1.1); 
        }
        checkbox{
            margin-right: 10px;
        }
        
    </style>
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <header>
        <nav class="navbar navbar-expand-lg p-2" style="background-color: rgb(245, 245, 245)">
            <div class="container-fluid">
                <h4 class="text-success">ShareSphere</h4>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse d-flex" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-lg-0 d-flex justify-content-lg-center w-100">
                        <li class="nav-item">
                            <a class="nav-link active" href="{% url 'institute_dashboard' %}">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="{% url 'courselisting' %}">Course
                                Listings</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Contact Us</a>
                        </li>
                    </ul>

                    {% if request.session.username %}
                    <ul class="navbar-nav mb-2 me-5 mb-lg-0 w-30 d-flex justify-content-lg-end ">
                        <li><i class="bi bi-person"></i>
                        </li>
                        <li class="nav-item dropdown ">
                            <a class="nav-link text-success" style="font-size: 30px; font-weight: bold;" href="#"
                                role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                {{ request.session.username }}
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Profile</a></li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Log Out</a></li>
                            </ul>
                        </li>
                    </ul>
                    {% elif user.is_authenticated%}

                    <ul class="navbar-nav mb-2 me-5 mb-lg-0 w-50 d-flex justify-content-lg-end ">
                        <li>
                            <img src="{{ profile_photo_url }}" alt="Profile Photo" class="img-thumbnail rounded-circle"
                                style="max-width: 40px; max-height: 40px;">
                        </li>
                        <li class="nav-item dropdown ">
                            <a class="nav-link text-success" style="font-size: 20px; font-weight: bold;" href="#"
                                role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <p>{{ user.first_name }} {{ user.last_name }}</p>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" href="#" onclick="openProfileModal()">
                                        Profile
                                    </a>
                                </li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Log Out</a></li>
                            </ul>
                        </li>
                    </ul>

                    {% else %}
                    <ul class="navbar-nav mb-2 mb-lg-0 w-50 d-flex justify-content-lg-end">
                        <li class="nav-item dropdown">
                            <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <button class="btn btn-outline-success">Sign
                                    Up</button>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{%url 'signup' %}">Register as
                                        User</a></li>
                                <li><a class="dropdown-item" href="{% url 'inst_signup' %}">Register
                                        as Institute</a></li>
                                <li><a class="dropdown-item" href="{% url 'acc_signup' %}">Register
                                        as Landlord</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{%url 'login' %}" role="button" aria-expanded="false">
                                <button class="btn btn-outline-success">Log
                                    In</button>
                            </a>
                        </li>
                    </ul>
                    {% endif %}
                </div>
            </div>
        </nav>
    </header>
    <body>

    <div class="container-fluid" >
        <div class="row">
            <div class="col-md-2" style="background-color: grey;">
                <div class="nav flex-column nav-pills mt-4" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-all-tab" data-toggle="pill" href="#v-pills-all" role="tab"
                        aria-controls="v-pills-all" aria-selected="false">Posting</a>
                    <a class="nav-link" id="v-pills-approved-tab" data-toggle="pill" href="#v-pills-approved" role="tab"
                        aria-controls="v-pills-approved" aria-selected="true"> Add listing</a>
                    <a class="nav-link" id="v-pills-pending-tab" data-toggle="pill" href="#v-pills-pending" role="tab"
                        aria-controls="v-pills-pending" aria-selected="false">Pending Applications</a>
                    <a class="nav-link" id="v-pills-rejected-tab" data-toggle="pill" href="#v-pills-rejected" role="tab"
                        aria-controls="v-pills-rejected" aria-selected="false">Rejected Applications</a>
                </div>
            </div>
            <div class="col-md-10">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- all applications -->
                    <div class="tab-pane fade show active" id="v-pills-all" role="tabpanel" aria-labelledby="v-pills-all-tab">
                        <div class="row mt-2">
                            <!-- First Card -->
                            <div class="col-md-4">
                                <div class="card mb-3" style="max-width: 540px;">
                                    <div class="row no-gutters">
                                        <div class="col-md-4">
                                            <img src="..." class="card-img" alt="...">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title">Card title 1</h5>
                                                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                                <input class="btn btn-success" type="button" value="view">
                                                <input class="btn btn-danger" type="button" value="Delete">
                                                <input class="btn btn-secondary" type="button" value="Edit">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Second Card -->
                            <div class="col-md-4">
                                <div class="card mb-3" style="max-width: 540px;">
                                    <div class="row no-gutters">
                                        <div class="col-md-4">
                                            <img src="..." class="card-img" alt="...">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title">Card title 2</h5>
                                                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="card mb-3" style="max-width: 540px;">
                                    <div class="row no-gutters">
                                        <div class="col-md-4">
                                            <img src="..." class="card-img" alt="...">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title">Card title 2</h5>
                                                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    <!-- Approved Applications -->
                    <div class="tab-pane fade" id="v-pills-approved" role="tabpanel" aria-labelledby="v-pills-approved-tab">
                        <div class="container" style="height: 80vh; overflow-y: auto;">
                            <h2 class="text-center">Property Rental Form</h2>
                            <form action="/submit_property" method="POST" enctype="multipart/form-data" id="propertyForm">
                                {% csrf_token %}

                    

                                <label for="pname">Property Name:</label>
                                <input type="text" id="pname" name="pname" required>
                                <span id="pnamespan" style="font-size: 12px;"></span>

                                <!-- Address -->
                                <label for="address">Address:</label>
                                <textarea id="address" name="address" rows="4" required></textarea>
                                <span id="addressspan" style="font-size: 12px;"></span>

                                <label for="mlink">Property location link ( Gmap ):</label>
                                <input type="text" id="mlink" name="mlink" required>
                                <span id="mlinkspan" style="font-size: 12px;"></span>

                                <!-- Country -->
                                <label for="nation">Country:</label>
                                <select class="form-control border mb-4 mt-2" id="nation" name="nation" required>
                                    <option value="">Select nation</option>
                                    <option value="Ireland">Ireland</option>
                                    <option value="Canada">Canada</option>
                                </select>
                                <span id="nationspan" style="font-size: 12px;"></span>

                                <!-- State -->
                                <label for="state">State/province:</label>
                                <select class="form-control border mb-4 mt-2" id="region" name="region" required>
                                    <!-- This dropdown will be populated dynamically based on the selected country -->
                                </select>
                                <span id="statespan" style="font-size: 12px;"></span>

                                <!-- Contact Number -->
                                
                    
                                <!-- Photographs of Property (Multiple File Upload) -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="frontview">Front view of Property:</label>
                                        <input type="file" id="frontview" name="frontview" accept="image/*" required>
                                        <span id="frontviewspan" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="living">Living Room:</label>
                                        <input type="file" id="living" name="living" accept="image/*" required>
                                        <span id="livingspan" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                    
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="bedroom">Bedroom:</label>
                                        <input type="file" id="bedroom" name="bedroom" accept="image/*" required>
                                        <span id="bedroomspan" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="bathroom">Wash Room:</label>
                                        <input type="file" id="bathroom" name="bathroom" accept="image/*" required>
                                        <span id="bathroomspan" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                    
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="kitchen">Kitchen:</label>
                                        <input type="file" id="kitchen" name="kitchen" accept="image/*" required>
                                        <span id="kitchenspan" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="dining">Dining Room:</label>
                                        <input type="file" id="dining" name="dining" accept="image/*" required>
                                        <span id="diningspan" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="other1">other 1:</label>
                                        <input type="file" id="other1" name="other1" accept="image/*" required>
                                        <span id="other1span" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="other2">other 2:</label>
                                        <input type="file" id="other2" name="other2" accept="image/*" required>
                                        <span id="other2span" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                                <!-- Container to display selected images -->
                                <div id="selected-images-container" style="margin-top: 10px;"></div>
                    
                                <!-- Rent Per Month -->
                                
                    
                                <!-- Minimum Duration of Rent -->
                                

                                <!-- BHK (Number of Bedrooms) -->
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="duration">Minimum Duration of Rent:</label>
                                        <select id="duration" name="duration" required>
                                            <option value="1">1 month</option>
                                            <option value="2">2 months</option>
                                            <option value="3">3 months</option>
                                            <option value="4">4 months</option>
                                            <option value="5">5 months</option>
                                            <option value="6">6 months</option>
                                        </select>
                                        <span id="durationspan" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="bhk">Number of Bedrooms (BHK):</label>
                                        <select id="bhk" name="bhk" required>
                                            <option value="1">1 BHK</option>
                                            <option value="2">2 BHK</option>
                                            <option value="3">3 BHK</option>
                                            <option value="4">4 BHK</option>
                                        </select>
                                        <span id="bhkspan" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="contact">Contact Number(include country code):</label>
                                        <input type="tel" id="contact" name="contact" pattern="[0-9]{10}" required>
                                        <span id="contactspan" style="font-size: 12px;"></span>

                                    </div>
                                    <div class="col-md-6">
                                        <label for="rent">Rent per Month:</label>
                                        <input type="text" id="rent" name="rent" required>
                                        <span id="rentspan" style="font-size: 12px;"></span>

                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <h5 class="mb-3">Additional Features:</h5>
                                    <div class="col-md-6">
                                        
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="Parea" name="Parea">
                                            <label class="form-check-label" for="Parea">Parking Area</label>
                                            <span id="Pareaspan" style="font-size: 12px;"></span>

                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="cctv" name="cctv">
                                            <label class="form-check-label" for="cctv">CCTV</label>
                                            <span id="cctvspan" style="font-size: 12px;"></span>

                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="heater" name="heater">
                                            <label class="form-check-label" for="heater">Heater</label>
                                            <span id="heaterspan" style="font-size: 12px;"></span>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="ac" name="ac">
                                            <label class="form-check-label" for="ac">Air Conditioning</label>
                                            <span id="acspan" style="font-size: 12px;"></span>

                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="pback" name="pback">
                                            <label class="form-check-label" for="pback">Power Backup</label>
                                            <span id="pbackspan" style="font-size: 12px;"></span>

                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="wifi" name="wifi">
                                            <label class="form-check-label" for="furniture">Wifi</label>
                                            <span id="wifispan" style="font-size: 12px;"></span>

                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Submit Button -->
                                <button type="submit" id="submitBtn">Submit</button>

                            </form>
                            <script>
                                $(document).ready(function () {
                                    // Define an array of fields with their corresponding validation functions
                                    const fields = [
                                        { id: "#pname", validate: validatePropertyname },
                                        { id: "#address", validate: validateAddress },
                                        { id: "#mlink", validate: validateMapLink },
                                        { id: "#nation", validate: validateCountry },
                                        { id: "#region", validate: validateState },
                                        { id: "#frontview", validate: validateFile },
                                        { id: "#living", validate: validateFile },
                                        { id: "#bedroom", validate: validateFile },
                                        { id: "#bathroom", validate: validateFile },
                                        { id: "#kitchen", validate: validateFile },
                                        { id: "#dining", validate: validateFile },
                                        { id: "#other1", validate: validateFile },
                                        { id: "#other2", validate: validateFile },
                                        { id: "#duration", validate: validateDuration },
                                        { id: "#bhk", validate: validateBHK },
                                        { id: "#contact", validate: validateContact },
                                        { id: "#rent", validate: validateRent },
                                    ];
                                
                                    // Helper function to create an error message span
                                    function createErrorSpan(fieldId) {
                                        const errorSpanId = `${fieldId}span`;
                                        const $errorSpan = $(`<span id="${errorSpanId}" class="error-message"></span>`);
                                        $(fieldId).after($errorSpan);
                                        return $errorSpan;
                                    }
                                
                                    // Helper function to display error messages
                                    function displayErrorMessage(fieldId, message) {
                                        const $errorSpan = $(`${fieldId}span`);
                                        $errorSpan.html(message).css("color", "#FF0000");
                                    }
                                
                                    // Helper function to enable or disable the submit button based on form validity
                                    function enableSubmitButton() {
                                        const isValid = fields.every(field => {
                                            const $field = $(field.id);
                                            const $errorSpan = $(`${field.id}span`);
                                
                                            if ($field.val().trim() === "" || $errorSpan.html() !== "") {
                                                return false;
                                            }
                                            return true;
                                        });
                                
                                        $("#submitBtn").prop("disabled", !isValid);
                                    }
                                
                                    // Helper function to validate a field on blur
                                    function validateFieldOnBlur(fieldId, validationFunction) {
                                        $(fieldId).blur(function () {
                                            validationFunction();
                                            enableSubmitButton();
                                        });
                                    }
                                
                                    // Initialize error message spans and field validation on blur
                                    fields.forEach(field => {
                                        createErrorSpan(field.id);
                                        validateFieldOnBlur(field.id, field.validate);
                                    });
                                
                                    // Call enableSubmitButton on keyup in any input field
                                    $('input').keyup(function () {
                                        enableSubmitButton();
                                    });
                                
                                    // Call enableSubmitButton on change in any select field
                                    $('select').change(function () {
                                        enableSubmitButton();
                                    });
                                
                                    // Initial check for form validity
                                    enableSubmitButton();
                                
                                    // Form submission
                                   // Form submission
                                        $("form").submit(function (event) {
                                            console.log("Form submitted!");
                                            // Validate the form before submission
                                            if (!validateForm()) {
                                                event.preventDefault(); // Prevent form submission if validation fails
                                            }
                                        });

                                
                                    // Validation functions for each field
                                    function validatePropertyname() {
                                        const pname = $("#pname").val();
                                    
                                        if (pname.trim() === "") {
                                            displayErrorMessage("#pname", "Enter the Property Name");
                                        } else if (pname.length > 20) {
                                            displayErrorMessage("#pname", "Property Name cannot exceed 20 characters");
                                        } else if (!/^[a-zA-Z0-9\s]+$/.test(pname)) {
                                            displayErrorMessage("#pname", "Property Name can only contain letters, numbers, and spaces");
                                        } else {
                                            $("#pnamespan").html("");
                                        }
                                    }
                                    
                                    
                                
                                    function validateAddress() {
                                        const address = $("#address").val();
                                    
                                        if (address.trim() === "") {
                                            displayErrorMessage("#address", "Enter the Property Address");
                                        } else if (address.length < 10) {
                                            displayErrorMessage("#address", "Address should be at least 10 characters long");
                                        } else if (address.length > 255) {
                                            displayErrorMessage("#address", "Address cannot exceed 255 characters");
                                        } else {
                                            $("#addressspan").html("");
                                        }
                                    }
                                    
                                
                                    function validateMapLink() {
                                        const mapLink = $("#mlink").val();
                                    
                                        if (mapLink.trim() === "") {
                                            displayErrorMessage("#mlink", "Enter the Property location link");
                                        } else if (!mapLink.startsWith("https://maps.google.com")) {
                                            displayErrorMessage("#mlink", "Enter a valid Google Maps location link");
                                        } else {
                                            $("#mlinkspan").html("");
                                        }
                                    }
                                    
                                    
                                
                                    function validateCountry() {
                                        const country = $("#nation").val();
                                        if (country.trim() === "") {
                                            displayErrorMessage("#nation", "Select the Country");
                                        } else {
                                            $("#nationspan").html("");
                                        }
                                    }
                                
                                    function validateState() {
                                        const state = $("#region").val();
                                        if (state.trim() === "") {
                                            displayErrorMessage("#region", "Select the State/Province");
                                        } else {
                                            $("#statespan").html("");
                                        }
                                    }
                                
                                    function validateFile() {
                                        const fileInput = $(this)[0];
                                        const fieldName = $(this).attr("name");
                                
                                        if (!fileInput.files || fileInput.files.length === 0) {
                                            displayErrorMessage(`#${fieldName}`, `Upload a ${fieldName} image`);
                                        } else {
                                            const allowedFormats = ["image/jpeg", "image/jpg", "image/png"];
                                            const file = fileInput.files[0];
                                
                                            if (!allowedFormats.includes(file.type)) {
                                                displayErrorMessage(`#${fieldName}`, `Invalid image format. Supported formats: JPEG, JPG, PNG`);
                                            } else {
                                                $(`#${fieldName}span`).html("");
                                            }
                                        }
                                    }
                                
                                    function validateDuration() {
                                        const duration = $("#duration").val();
                                        
                                        if (duration.trim() === "") {
                                            displayErrorMessage("#duration", "Enter the amount");
                                        } else if (!/^\d+$/.test(duration)) {
                                            displayErrorMessage("#duration", "Enter a valid numeric amount without alphabets or special characters");
                                        } else {
                                            $("#durationspan").html("");
                                        }
                                    }
                                    
                                    
                                
                                    function validateBHK() {
                                        const bhk = $("#bhk").val();
                                        if (bhk.trim() === "") {
                                            displayErrorMessage("#bhk", "Select the Number of Bedrooms (BHK)");
                                        } else {
                                            $("#bhkspan").html("");
                                        }
                                    }
                                    function validateContact() {
                                        const contact = $("#contact").val();
                                        const pattern = /^\+\d{1,4}\d{1,14}$/; // Country code format: +1234-567890123
                                    
                                        if (contact.trim() === "") {
                                            displayErrorMessage("#contact", "Enter the Contact Number");
                                        } else if (!pattern.test(contact)) {
                                            displayErrorMessage("#contact", "Enter a valid Contact Number with the country code");
                                        } else {
                                            $("#contactspan").html("");
                                        }
                                    }
                                    
                                
                                    function validateRent() {
                                        const rent = $("#rent").val();
                                        if (rent.trim() === "") {
                                            displayErrorMessage("#rent", "Enter the Rent per Month");
                                        } else {
                                            $("#rentspan").html("");
                                        }
                                    }
                                // Example validation function for Parking Area checkbox
                               

                                    // Additional validation functions can be added as needed
                                
                                    // You can reuse some of the validation functions from your course form script if they are applicable
                                });
                                
                            </script>
                        </div>
                    
                    </div>

                    <div class="tab-pane fade" id="v-pills-pending" role="tabpanel"
                        aria-labelledby="v-pills-pending-tab">


                    </div>

                    <!-- Rejected Applications -->
                    <div class="tab-pane fade" id="v-pills-rejected" role="tabpanel"
                        aria-labelledby="v-pills-rejected-tab">

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- PROFILE UPDATE MODAL -->
    <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="profileModalTitle">Profile</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Edit Profile Photo Section -->
                    <form id="profileForm" method="POST" action="{% url 'home' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="text-center mb-3">
                            <img src="{{ profile_photo_url }}" alt="Profile Photo" class="img-thumbnail rounded-circle"
                                style="max-width: 150px;" id="profileImage">

                            <br>
                            <button type="button" class="btn btn-link mt-2" id="editProfilePhotoButton">Edit Profile
                                Photo</button><br>
                            <input type="file" class="form-control-file d-none" id="profile_photo" name="profile_photo">
                        </div>

                        <!-- Display user details -->
                        <div class="form-group">
                            <label for="first_name">First Name</label>
                            <input type="text" class="form-control" id="first_name" value="{{ user.first_name }}"
                                name="first_name" pattern="[a-zA-Z]{3,}" placeholder="Eg: John" required>
                            <div class="invalid-feedback">
                                First name must contain only alphabetic characters and have a minimum length of 3
                                characters.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="last_name">Last Name</label>
                            <input type="text" class="form-control" id="last_name" value="{{ user.last_name }}"
                                name="last_name" pattern="[a-zA-Z]{3,}" placeholder="Eg: Doe" required>
                            <div class="invalid-feedback">
                                Last name must contain only alphabetic characters and have a minimum length of 3
                                characters.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            {% if user.migrant.dob %}
                            <input type="text" class="form-control" id="dob" value="{{ user.migrant.dob }}" name="dob"
                                readonly>
                            {% else %}
                            <input type="date" class="form-control" id="dob" value="{{ user.migrant.dob|date:'Y-m-d' }}"
                                name="dob" required>
                            <span id="dateOfBirthError" class="text-danger"></span>
                            <div class="invalid-feedback">
                                Date of birth is required.
                            </div>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="contact_no">Contact Number</label>
                            <input type="tel" class="form-control" id="contact_no" value="{{ user.migrant.contact_no }}"
                                name="contact_no" pattern="[1-9][0-9]{9}" required>
                            <div class="invalid-feedback">
                                Contact number must start with a digit from 1 to 9 and contain a total of 10 digits.
                            </div>
                        </div>

                        <!-- Add hidden input fields to store user ID and migrant ID -->
                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <input type="hidden" name="migrant_id" value="{{ user.migrant.id }}">

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Save changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

    <script>


        
        document.addEventListener('DOMContentLoaded', function () {
            var myTabs = new bootstrap.Tab(document.getElementById('v-pills-all-tab'));
            myTabs.show();
        });
        
        
        function openProfileModal() {
            $('#profileModal').modal('show');
        }
        document.addEventListener('DOMContentLoaded', function () {
            const editProfilePhotoButton = document.getElementById('editProfilePhotoButton');
            const profilePhotoInputDiv = document.getElementById('profilePhotoInputDiv');

            editProfilePhotoButton.addEventListener('click', function () {
                // Toggle the visibility of the "Choose file" input field
                if (profilePhotoInputDiv.style.display === 'none') {
                    profilePhotoInputDiv.style.display = 'block';
                } else {
                    profilePhotoInputDiv.style.display = 'none';
                }
            });

            // Rest of your JavaScript code
        });

        document.addEventListener('DOMContentLoaded', function () {
            const editProfilePhotoButton = document.getElementById('editProfilePhotoButton');
            const profilePhotoInput = document.getElementById('profile_photo');
            const dobInput = document.getElementById('dob');
            const firstNameInput = document.getElementById('first_name');
            const lastNameInput = document.getElementById('last_name');
            const contactNoInput = document.getElementById('contact_no');

            editProfilePhotoButton.addEventListener('click', function () {
                profilePhotoInput.classList.remove('d-none');
            });

            // Add change event listeners for validation
            firstNameInput.addEventListener('change', validateFirstName);
            lastNameInput.addEventListener('change', validateLastName);
            contactNoInput.addEventListener('change', validateContactNo);
            dobInput.addEventListener('change', validateDateOfBirth); // Add this line

            function validateFirstName() {
                const regex = /^[a-zA-Z]{3,}$/;
                if (!regex.test(firstNameInput.value)) {
                    firstNameInput.setCustomValidity('First name must contain only alphabetic characters and have a minimum length of 3 characters.');
                } else {
                    firstNameInput.setCustomValidity('');
                }
            }

            function validateLastName() {
                const regex = /^[a-zA-Z]{3,}$/;
                if (!regex.test(lastNameInput.value)) {
                    lastNameInput.setCustomValidity('Last name must contain only alphabetic characters and have a minimum length of 3 characters.');
                } else {
                    lastNameInput.setCustomValidity('');
                }
            }

            function validateContactNo() {
                const regex = /^[1-9][0-9]{9}$/;
                if (!regex.test(contactNoInput.value)) {
                    contactNoInput.setCustomValidity('Contact number must start with a digit from 1 to 9 and contain a total of 10 digits.');
                } else {
                    contactNoInput.setCustomValidity('');
                }
            }

            function validateDateOfBirth() {
                const dob = dobInput.value;
                if (dob.trim() === "") {
                    dobInput.setCustomValidity('Date of birth is required.');
                } else {
                    // Convert the input date to the expected format (YYYY-MM-DD)
                    const selectedDate = new Date(dob);
                    const year = selectedDate.getFullYear();
                    const month = String(selectedDate.getMonth() + 1).padStart(2, '0'); // Add 1 to the month because it's zero-based
                    const day = String(selectedDate.getDate()).padStart(2, '0');

                    const formattedDate = `${year}-${month}-${day}`;

                    // Update the input value with the formatted date
                    dobInput.value = formattedDate;

                    const currentDate = new Date();
                    const age = currentDate.getFullYear() - selectedDate.getFullYear();
                    if (age < 13) {
                        dobInput.setCustomValidity('You must be at least 13 years old.');
                    } else {
                        dobInput.setCustomValidity('');
                    }
                }
            }

        });



        <!--Country Dropdown-->
        const nationDropdown = document.getElementById('nation');
        const regionDropdown = document.getElementById('region');
        // Define region options for each country
        const countryRegions = {
        'Ireland': [
            'Connacht',
            'County Carlow',
            'County Cavan',
            'County Clare',
            'County Cork',
            'County Donegal',
            'County Dublin',
            'County Galway',
            'County Kerry',
            'County Kildare',
            'County Kilkenny',
            'County Laois',
            'County Limerick',
            'County Longford',
            'County Louth',
            'County Mayo',
            'County Meath',
            'County Monaghan',
            'County Offaly',
            'County Roscommon',
            'County Sligo',
            'County Tipperary',
            'County Waterford',
            'County Westmeath',
            'County Wexford',
            'County Wicklow',
            'Leinster',
            'Munster',
            'Ulster',
            // Add more options for Ireland as needed
        ],

        'Canada': [
            'Alberta',
            'British Columbia',
            'Manitoba',
            'New Brunswick',
            'Newfoundland and Labrador',
            'Northwest Territories',
            'Nova Scotia',
            'Nunavut',
            'Ontario',
            'Prince Edward Island',
            'Quebec',
            'Saskatchewan',
            'Yukon'
        ],
        // Add more countries and their regions here
        };

        // Function to populate the region dropdown based on the selected country
        function populateRegionDropdown() {


        // Get the selected country
        const selectedCountry = nationDropdown.value;

        // Clear existing options
        regionDropdown.innerHTML = '<option value="">Select State or Province</option>';

        // Populate with options for the selected country
        if (selectedCountry in countryRegions) {
            countryRegions[selectedCountry].forEach(region => {
                const option = document.createElement('option');
                option.value = region;
                option.textContent = region;
                regionDropdown.appendChild(option);
            });
        }

        // Show or hide the region dropdown based on the selection
        // regionDropdown.style.display = selectedCountry ? 'block' : 'none';
        }

        // Attach an event listener to the nation dropdown
        nationDropdown.addEventListener('change', populateRegionDropdown);

        // Initial population of the region dropdown based on the default selection
        populateRegionDropdown();

    </script>
    
    <!-- Add Bootstrap JS scripts at the end of the body if needed -->
    <!-- Add Bootstrap JS scripts at the end of the body if needed -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>

</html>
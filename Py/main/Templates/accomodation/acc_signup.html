{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.css" rel="stylesheet" />
    <!-- MDB -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"></script>

    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/templatemo-edu-meeting.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/owl.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/lightbox.css' %}" />
    <link rel="stylesheet" href="{% static '/signup.css' %}">
    <title>ShareSphere | Signup</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function () {

            const fields = [
                { id: "#fn", validate: validatefName },
                { id: "#ln", validate: validatesName },
                { id: "#mail", validate: validateEmail },
                { id: "#uid", validate: validateUid },
                { id: "#phno", validate: validatePhno },
                { id: "#pass", validate: validatePassword },
                { id: "#cpass", validate: validateConfirmPassword },

            ];

            const validationStatus = {};

            fields.forEach(field => {
                $(field.id).keyup(function () {
                    field.validate();
                    validationStatus[fieldId] = $(`${fieldId}span`).html() === "";  
                    checkFormValidity();
                });

                validateFieldOnBlur(field.id, field.validate);
            });

            function checkFormValidity() {
                const isValid = Object.values(validationStatus).every(status => status);

                $("#submitBtn").prop("disabled", !isValid);
            }

            function validateFieldOnBlur(fieldId, validationFunction) {
                $(fieldId).blur(function () {
                    validationFunction();
                    validationStatus[fieldId] = $(`${fieldId}span`).html() === "";  
                });
            }

            // Form submission
            $("#form").submit(function (event) {
                if (!$("#submitBtn").prop("disabled")) {
                    // Form is valid, allow submission
                    return true;
                } else {
                    // Form is not valid, prevent submission
                    event.preventDefault();
                    return false;
                }
            });

            // Initial check for form validity
            checkFormValidity();

            function validateuName() {
                const name = $("#un").val();
                if (name.trim() === "") {
                    $("#unspan").html("Enter the Username").css("color", "#41586B");
                } else {
                    $("#unspan").html("");
                }
            }

            function validatefName() {
                const name = $("#fn").val();
                const lettersWithSpaces = /^[A-Za-z\s]+$/;
                if (name.trim() === "") {
                    $("#fnspan").html("Enter the First Name").css("color", "#41586B");
                } else if (!lettersWithSpaces.test(name)) {
                    $("#fnspan").html("First Name field required only alphabet characters with spaces").css("color", "#41586B");
                } else {
                    $("#fnspan").html("");
                }
            }

            function validatesName() {
                const name = $("#ln").val();
                const lettersWithSpaces = /^[A-Za-z\s]+$/;
                if (name.trim() === "") {
                    $("#lnspan").html("Enter the Last Name").css("color", "#41586B");
                } else if (!lettersWithSpaces.test(name)) {
                    $("#lnspan").html("Last Name field required only alphabet characters with spaces").css("color", "#41586B");
                } else {
                    $("#lnspan").html("");
                }
            }
            function validatesNation() {
                const name = $("#nation").val();
                const lettersWithSpaces = /^[A-Za-z\s]+$/;
                if (name.trim() === "") {
                    $("#nationspan").html("Choose the nationality").css("color", "#41586B");
                } else if (!lettersWithSpaces.test(name)) {
                    $("#nationspan").html("Last Name field required only alphabet characters with spaces").css("color", "#41586B");
                } else {
                    $("#lnspan").html("");
                }
            }

            function validateEmail() {
                const email = $("#mail").val();
                const filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (email === "") {
                    $("#mailspan").html("Enter the Email Id").css("color", "#41586B");
                } else if (!filter.test(email)) {
                    $("#mailspan").html("Use correct Email Id").css("color", "#41586B");
                } else {
                    $("#mailspan").html("");
                }
            }


            function validateUid() {
                const uid = $("#uid").val();
                const filter = /^\d{12}$/;
                if (uid === "") {
                    $("#uidspan").html("Enter the Adhaar Number").css("color", "#41586B");
                } else if (!filter.test(uid)) {
                    $("#uidspan").html("Use correct Adhaar number").css("color", "#41586B");
                } else {
                    $("#uidspan").html("");
                }
            }


            function validatePhno() {
                const ph = $("#phno").val();
                const filter = /^\d{10}$/;
                if (ph === "") {
                    $("#phonespan").html("Enter the Contact Number").css("color", "#41586B");
                } else if (!filter.test(ph)) {
                    $("#phonespan").html("Enter the correct Contact Number").css("color", "#41586B");
                } else {
                    $("#phonespan").html("");
                }
            }

            function validatePassword() {
                const password = $("#pass").val();
                const pwd_expression = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-])/;
                if (password === "") {
                    $("#passspan").html("Enter the Password").css("color", "#41586B");
                } else if (!pwd_expression.test(password)) {
                    $("#passspan").html("Use correct Password").css("color", "#41586B");
                } else {
                    $("#passspan").html("");
                }
            }

            function validateConfirmPassword() {
                const password = $("#pass").val();
                const confirmPassword = $("#cpass").val();
                if (confirmPassword === "") {
                    $("#cpassspan").html("Enter the Confirm Password").css("color", "#41586B");
                } else if (confirmPassword !== password) {
                    $("#cpassspan").html("Password do not match").css("color", "#41586B");
                } else {
                    $("#cpassspan").html("");
                }
            }
        });
    </script>


</head>

<body>
    <section class="background-radial-gradient overflow-hidden">

        <div class="container px-4 py-5 px-md-5 text-center text-lg-start my-5">
            <div class="row gx-lg-5 align-items-center mb-5">
                <div class="col-lg-6 mb-5 mb-lg-0" style="z-index: 10">
                    <h1 class="my-5 display-5 fw-bold ls-tight" style="color: hsl(218, 81%, 95%)">
                        ShareSphere <br />
                        <span style="color: hsl(218, 81%, 75%); font-size: 25px">The
                            complete migration support platform</span>
                    </h1>
                    <p class="mb-4 opacity-70 d-none d-md-block" style="color: hsl(218, 81%, 85%)">
                        Unlock Your Global Journey with ShareSphere!
                        Seamlessly connect, collaborate, and conquer the
                        migration experience as an Indian mover and shaker.
                        From finding top colleges to securing dream jobs and
                        accommodations, ShareSphere is your passport to a
                        thriving new chapter abroad
                    </p>
                </div>

                <div class="col-lg-6 mb-5 mb-lg-0 position-relative">
                    <div id="radius-shape-1" class="position-absolute rounded-circle shadow-5-strong"></div>
                    <div id="radius-shape-2" class="position-absolute shadow-5-strong"></div>

                    <div class="card bg-glass">
                        <div class="card-body px-4 py-5 px-md-5">
                            <h5 class="card-title text-center mb-4 fw-medium fs-3">REGISTRATION</h5>
                            <form id="form" action method="post">
                                {% csrf_token %}

                                <div class="form-outline mb-4">
                                    <input type="text" id="fn" name="fname" class="form-control border" required />
                                    <label class="form-label" id for="form3Example3">First Name</label>
                                    <span id="fnspan" style="font-size: 12px;"></span>
                                </div>
                                <div class="form-outline mb-4">
                                    <input type="text" id="ln" name="lname" class="form-control border" />
                                    <label class="form-label" id="label" for="form3Example3">Last Name</label>
                                    <span id="lnspan" style="font-size: 12px;"></span>
                                </div>

                                <!-- Email input -->

                                <div class="form-outline mb-4">
                                    <input type="email" id="mail" name="email" class="form-control border" />
                                    <label class="form-label" for="form3Example3">Email
                                        address</label>
                                    <span id="mailspan" style="font-size: 12px;"></span>
                                </div>

                                <div class="row">
                                    <!-- Country Code selector -->
                                    <div class="col-md-3 mb-4">
                                        <select class="form-control border" id="ccode" name="ccode"
                                            style="background-color: rgba(245, 245, 245, 0.659); opacity:10px;">
                                            <!-- You can add more options as needed -->
                                            <option value="+91">+91 (India)</option>
                                            <option value="+082">+082 (Canada)</option>
                                            <!-- Add more country codes and names here -->
                                        </select>

                                    </div>

                                    <!-- Phone number input -->
                                    <div class="col-md-9 mb-4">
                                        <div class="form-outline">
                                            <input type="tel" id="phno" name="phno" class="form-control border" />
                                            <label class="form-label" for="phone">Phone Number</label>
                                        </div>
                                    </div>
                                    <span id="codespan"
                                        style="font-size: 12px; margin-top: -20px; margin-bottom: 10px;"></span>
                                    <span id="phonespan"
                                        style="font-size: 12px; margin-top: -20px; margin-bottom: 10px;"></span>
                                </div>

                                <div class="form-outline mb-4">
                                    <input type="text" id="uid" name="uid" class="form-control border" />
                                    <label class="form-label" for="form3Example3">UID Number</label>
                                    <span id="uidspan" style="font-size: 12px;"></span>
                                </div>
                                <div class="form-group">
                                    <label for="country" class="ms-2">Choose
                                        nationality:</label>
                                    <select class="form-control border mb-4 mt-2" id="nation" name="nation"
                                        style="background-color: rgba(245, 245, 245, 0.659); opacity:10px;">
                                        <option value="India">Indian</option>
                                        <option value="Canada">Canada</option>
                                        <option value="Ireland">Ireland</option>
                                    </select>
                                </div>
                                <!-- Password input -->
                                <div class="form-outline mb-4">
                                    <input type="password" id="pass" name="pass" class="form-control border" />
                                    <label class="form-label" for="form3Example4">Password</label>
                                    <span id="passspan" style="font-size: 12px;"></span>
                                </div>
                                <div class="form-outline mb-4">
                                    <input type="password" id="cpass" name="cpass" class="form-control border" />
                                    <label class="form-label" for="form3Example4">Confirm Password</label>
                                    <span id="cpassspan" style="font-size: 12px;"></span>
                                </div>

                                <!-- Checkbox -->
                                <div class="form-check d-flex justify-content-center mb-4">
                                    <input class="form-check-input me-2" type="checkbox" value id="form2Example33"
                                        checked />
                                    <label class="form-check-label" for="form2Example33">
                                        Agree to the Terms and Conditions
                                    </label>
                                </div>

                                <!-- Submit button -->
                                <button type="submit" id="submitBtn" class="btn btn-primary btn-block mb-4" disabled>
                                    Sign up
                                </button>

                                <!-- Register buttons -->
                                {% comment %} <div class="text-center">
                                    <p>or sign up with:</p>
                                    <div class>
                                        <button class="btn btn-google btn-login text-uppercase fw-bold col-md-6"
                                            type="submit">
                                            <a href="{%url 'social:begin' 'google-oauth2' %}">
                                                <i class="fab fa-google me-2"></i>
                                                Sign in with Google</a>
                                        </button>
                                    </div>

                                </div> {% endcomment %}
                                <div class="text-center align-item-center">

                                    <label class="form-check-label mt-3 text-center" for="forgotpassword">
                                        <a href="{%url 'login' %}" style="color: #27350F; text-decoration: none">Already
                                            registered? Sign In here</a>

                                    </label>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</body>

</html>